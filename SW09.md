# ğŸ“˜ Woche 9 â€“ Visualisieren mit Pandas, Matplotlib und Seaborn

Diese Woche behandelt das **Visualisieren von Daten**, um Muster, Verteilungen und ZusammenhÃ¤nge besser erkennen und kommunizieren zu kÃ¶nnen.

---

## ğŸ“Œ 1. Ziel der Datenvisualisierung

- **Explorative Analyse**: AuffÃ¤lligkeiten entdecken (z.â€¯B. AusreiÃŸer, Gruppenunterschiede)
- **Erkenntnisse kommunizieren**: Ergebnisse visuell vermitteln
- **Modelle vorbereiten**: Verteilungen prÃ¼fen, ZusammenhÃ¤nge erkennen

---

## ğŸ§° 2. Vorbereitung

```python
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt

# Optional: Standard-Darstellung anpassen
plt.rcParams['figure.figsize'] = [6, 4]
plt.style.use('ggplot')  # Stil Ã¤ndern
```

---

## ğŸ“ˆ 3. Plottypen in Pandas

| Diagrammtyp       | Pandas-Methode           | Zweck                           |
|-------------------|--------------------------|----------------------------------|
| Liniendiagramm     | `.plot()`                | Zeitreihen, Trends               |
| SÃ¤ulendiagramm     | `.plot(kind='bar')`      | HÃ¤ufigkeiten, Gruppierung        |
| Balkendiagramm     | `.plot(kind='barh')`     | HÃ¤ufigkeiten (horizontal)        |
| Histogramm         | `.plot(kind='hist')`     | Verteilungen (stetige Daten)     |
| Boxplot            | `.plot(kind='box')`      | Median, Quartile, AusreiÃŸer      |
| Streudiagramm      | `.plot(kind='scatter')`  | Zusammenhang zw. 2 Variablen     |
| Dichtekurve (KDE)  | `.plot(kind='kde')`      | Glattere Verteilungskurve        |
| Tortendiagramm     | `.plot(kind='pie')`      | Prozentuale Anteile              |

---

## ğŸ“Š 4. Zeitreihen plotten (Liniendiagramm)

```python
SPI.plot()
```

Mit Titel, Achsentexten, Grenzen und Legende:
```python
SPI.plot(title='SPI-Teilindizes, 1996 - 2023',
         xlabel='',
         ylabel='Indexstand',
         xlim=['1996-01-01', '2024-01-01'],
         legend=False)
plt.legend(['Small-Cap', 'Mid-Cap', 'Large-Cap']);
```

---

## ğŸ“‰ 5. Monatsrenditen berechnen

```python
SPI_R = SPI.pct_change().dropna() * 100
```

---

## ğŸ“ 6. Subplots: Einzelne Teilindizes vergleichen

```python
SPI_R.plot(figsize=(6, 7),
           subplots=True,
           sharey=True,
           ylim=[-20, 20],
           xlabel='')
plt.suptitle('Monatsrenditen in %', y=0.93)
```

---

## ğŸ“¦ 7. Histogramm: Verteilung der Monatsrenditen

```python
SPI_R.SPI_Large_Cap.plot.hist(
    xlabel='Monatsrenditen in %',
    ylabel='HÃ¤ufigkeit',
    title='SPI-Large-Cap, 02.1996 - 12.2023')
```

---

## ğŸ“Š 8. Boxplots: Vergleich der Verteilungen

```python
SPI_R.boxplot(showmeans=True, vert=False,
              flierprops={'markersize': 3})
plt.title('Verteilung der SPI-Monatsrenditen in %')
plt.yticks([1, 2, 3], ['Small-Cap', 'Mid-Cap', 'Large-Cap']);
```

---

## ğŸš— 9. Beispiel: Auto-Datensatz

### Daten laden:
```python
Auto = pd.read_csv('../weitere_Daten/Auto.csv', sep=';', index_col=-1)
```

### Ursprung umbenennen:
```python
Auto['origin'] = Auto.origin.replace({1: 'USA', 2: 'Europa', 3: 'Japan'})
```

---

## ğŸ§± 10. SÃ¤ulendiagramm: Anzahl Zylinder

```python
Auto.cylinders.value_counts().sort_index().plot.bar(
    rot=0,
    xlabel='Anzahl Zylinder',
    ylabel='HÃ¤ufigkeit')
```

---

## ğŸ§© 11. Gestapeltes Balkendiagramm

```python
tab = pd.crosstab(Auto.cylinders, Auto.origin)
tab.columns.name = 'Herkunft'
tab.index.name = 'Anzahl Zylinder'
tab.plot.bar(rot=0, stacked=True)
```

**Beobachtung:**
- 4 Zylinder am hÃ¤ufigsten
- 8-Zylinder-Fahrzeuge fast nur in den USA

---

## â›½ 12. Verbrauch berechnen (Liter/100km)

```python
Auto['Verbrauch'] = (100 * 3.78541 / 1.60934) / Auto.mpg
```

---

## ğŸ“‰ 13. Histogramm: Kraftstoffverbrauch

```python
Auto.Verbrauch.plot.hist(
    title='Kraftstoffverbrauch',
    xlabel='l/100 km',
    ylabel='HÃ¤ufigkeit',
    alpha=0.5,
    ec='black')
```

---

## ğŸ“¦ 14. Boxplot: Verbrauch nach Herkunft

```python
Auto.boxplot(column='Verbrauch', by='origin', vert=False)
plt.title('Kraftstoffverbrauch nach Herkunft')
plt.xlabel('l/100 km')
plt.ylabel('')
plt.suptitle('')
```

---

## ğŸ“Œ 15. Streudiagramm: Hubraum vs PS

```python
Auto.plot.scatter('displacement', 'horsepower')
Auto.displacement.corr(Auto.horsepower).round(3)  # â†’ 0.897
```

**Erkenntnis:** Starker linearer Zusammenhang zwischen Hubraum und Leistung

---

## ğŸ¨ 16. Seaborn (optional)

```python
import seaborn as sns

# Regplot mit Regressionsgerade
sns.regplot(x='displacement', y='Verbrauch', data=Auto)
plt.xlabel('Hubraum in Kubikzoll')
plt.ylabel('Verbrauch in l/100km')

# Farbige Gruppen mit lmplot
sns.lmplot(x='displacement', y='Verbrauch', data=Auto, hue='origin')
```

---

## âœ… Fazit Woche 9

Du kannst jetzt:

âœ… Daten mit **Pandas oder Matplotlib** visualisieren  
âœ… Die wichtigsten **Diagrammtypen gezielt einsetzen**  
âœ… Gruppenvergleiche, Verteilungen und ZusammenhÃ¤nge darstellen  
âœ… Seaborn fÃ¼r ansprechende Visualisierungen nutzen

Visualisierung ist ein zentrales Werkzeug der explorativen Datenanalyse â€“ nutze es regelmÃ¤ÃŸig!

