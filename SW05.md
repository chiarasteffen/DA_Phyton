# ğŸ“˜ Woche 5 â€“ Daten lesen & schreiben mit Pandas

Diese Woche behandelt den Umgang mit verschiedenen **Dateiformaten** in Pandas:  
Wie man Daten einliest, speichert, mit Fehlwerten umgeht und mit Formaten wie CSV, Excel, Pickle oder STATA arbeitet.

---

## 1. ğŸ“ Einlesen von CSV-Dateien

### Standard-CSV mit Komma als Trennzeichen
```python
import pandas as pd

df = pd.read_csv('daten.csv')
```

### Mit Semikolon getrennt
```python
df = pd.read_csv('daten.csv', sep=';')
```

---

## 2. ğŸ“Œ Optionen beim Einlesen von CSV-Dateien

- **Kein Header vorhanden**:
```python
df = pd.read_csv('daten.csv', header=None)
```

- **Header manuell setzen**:
```python
df = pd.read_csv('daten.csv', header=None,
                 names=['Name', 'Vorname', 'Geschlecht', 'Gehalt'])
```

- **Nur bestimmte Spalten und Zeilen laden**:
```python
df = pd.read_csv('drinksbycountry.csv',
                 usecols=[0, 4, 5],
                 index_col=0,
                 nrows=4)
```

- **Index-Spalte manuell setzen**:
```python
df = pd.read_csv('daten.csv', index_col=0)
```

---

## 3. ğŸ§ª Flexible Trennung (Whitespace-getrennt)

- Automatisches Erkennen von beliebigen Leerzeichen:
```python
df = pd.read_csv('ex3.txt', sep='\\s+')
```

- Alternative: **Fixed Width Format**:
```python
df = pd.read_fwf('ex3.txt', index_col=0)
```

---

## 4. âŒ Umgang mit Fehlwerten (NaN)

- **Fehlwerte erkennen**:
```python
df.isna()
df.isna().sum()
```

- **Zeilen mit NaN lÃ¶schen**:
```python
df.dropna(inplace=True)
```

- **Benutzerdefinierte NaN-Werte beim Einlesen definieren**:
```python
df = pd.read_csv('daten.csv', na_values=['fehlend', 'NA', '-'])
```

- **Fehlwerte ersetzen**:
```python
df.fillna(0, inplace=True)   # alle NaNs durch 0 ersetzen
```

---

## 5. ğŸ’¾ Schreiben von Daten

- **Standard-CSV speichern**:
```python
df.to_csv('output.csv')
```

- **Mit anderem Trennzeichen**:
```python
df.to_csv('output.csv', sep='|')
```

- **Fehlwerte ersetzen beim Speichern**:
```python
df.to_csv('output.csv', na_rep='MISSING')
```

- **Ohne Index speichern**:
```python
df.to_csv('output.csv', index=False)
```

---

## 6. ğŸ¥’ BinÃ¤rformat: Pickle

Pickle speichert Pandas-Objekte effizient im BinÃ¤rformat (nicht fÃ¼r Archivierung geeignet!).

- **Speichern**:
```python
df.to_pickle('daten.pkl')
```

- **Laden**:
```python
df = pd.read_pickle('daten.pkl')
```

---

## 7. ğŸ“Š Excel-Dateien

- **Standardblatt einlesen**:
```python
df = pd.read_excel('datei.xlsx')
```

- **Bestimmtes Tabellenblatt einlesen**:
```python
df = pd.read_excel('datei.xlsx', sheet_name='Tabelle2', index_col=0)
```

- **Als Excel speichern**:
```python
df.to_excel('output.xlsx', index=False)
```

> ğŸ’¡ Excel-Export benÃ¶tigt das Paket `openpyxl` (fÃ¼r `.xlsx`).

---

## 8. ğŸ“š Weitere unterstÃ¼tzte Formate

Pandas unterstÃ¼tzt viele Dateiformate:

| Format     | Funktion                 |
|------------|--------------------------|
| JSON       | `pd.read_json()`         |
| STATA      | `pd.read_stata()`        |
| SAS/SPSS   | Ã¼ber Zusatzpakete        |
| SQL        | `pd.read_sql()`          |

### Beispiel: STATA-Datei einlesen
```python
df = pd.read_stata('daten.dta')
```

---

## 9. ğŸŒ Daten aus dem Internet laden

Daten kÃ¶nnen direkt aus URLs geladen werden:

```python
url = "https://raw.githubusercontent.com/datensatz.csv"
df = pd.read_csv(url)
```

> âš ï¸ Falls HTTPS nicht unterstÃ¼tzt wird, kann ein SSL-Fehler auftreten.

---

## 10. ğŸ§  Best Practices

- Immer `index_col` bewusst setzen oder ausschlieÃŸen (z.â€¯B. bei Zeitreihen).
- Immer auf **Konsistenz von Trennzeichen** achten (`sep=';'` vs `','`).
- Dateiformate mit NaNs immer mit `na_values` oder `fillna` behandeln.
- BinÃ¤rformate (Pickle) nie langfristig speichern â†’ nur temporÃ¤r zur Performance.
- GroÃŸe Excel-Dateien â†’ nur benÃ¶tigte BlÃ¤tter/Spalten laden.

---

## âœ… Fazit Woche 5

Diese Woche vermittelt essentielle FÃ¤higkeiten zum **Einlesen, Schreiben und Bearbeiten von Daten in verschiedenen Formaten**.

Du kannst jetzt:

- **CSV-Dateien** robust einlesen und exportieren
- **Fehlwerte** erkennen, behandeln und gezielt ersetzen
- mit **Excel**- und **Pickle-Dateien** effizient arbeiten
- Daten aus **exotischen Formaten (STATA, JSON)** einlesen
- Dateistrukturen erkennen und analysieren

ğŸ‘‰ Diese Techniken sind Grundlage fÃ¼r alle weiteren Schritte in der Datenanalyse.
